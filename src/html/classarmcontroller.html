<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: armcontroller Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classarmcontroller-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">armcontroller Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Arm Controller Node for the HEBI Robotics 5-DOF Manipulator Arm.  
 <a href="classarmcontroller.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7e2b5cd80851fced3e54641422fb04dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#a7e2b5cd80851fced3e54641422fb04dd">armcontroller</a> ()</td></tr>
<tr class="separator:a7e2b5cd80851fced3e54641422fb04dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45794311f7ab89c67fe7423e07ea19d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#a45794311f7ab89c67fe7423e07ea19d7">init</a> ()</td></tr>
<tr class="separator:a45794311f7ab89c67fe7423e07ea19d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cba85249ae1746aeac14d12b68becdc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#a3cba85249ae1746aeac14d12b68becdc">updateFeedback</a> ()</td></tr>
<tr class="separator:a3cba85249ae1746aeac14d12b68becdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8bbda9cbee82997b7429ecda7c5412b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#af8bbda9cbee82997b7429ecda7c5412b">getFeedbackMsg</a> (sensor_msgs::JointState &amp;jointState_fbk, trajectory_msgs::JointTrajectoryPoint &amp;trajectoryCmd_fbk, model_learning::FeedbackML &amp;armcontroller_fbk)</td></tr>
<tr class="separator:af8bbda9cbee82997b7429ecda7c5412b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2a040d42baac477ccc328d03b8c8903"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#ab2a040d42baac477ccc328d03b8c8903">controller</a> (const Eigen::VectorXd &amp;positionCmd, const Eigen::VectorXd &amp;velocityCmd, const Eigen::VectorXd &amp;accelCmd, std::vector&lt; double &gt; &amp;torque)</td></tr>
<tr class="separator:ab2a040d42baac477ccc328d03b8c8903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa96c09e059c416f996774d4bf4b80619"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#aa96c09e059c416f996774d4bf4b80619">feedbackControl</a> (const Eigen::VectorXd &amp;error_pos, const Eigen::VectorXd &amp;error_vel, std::vector&lt; double &gt; &amp;torque)</td></tr>
<tr class="separator:aa96c09e059c416f996774d4bf4b80619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeefa5bf9839dd31ba78b33cfe092505c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#aeefa5bf9839dd31ba78b33cfe092505c">sendCommand</a> (const std::vector&lt; double &gt; &amp;alpha, const std::vector&lt; double &gt; &amp;torque)</td></tr>
<tr class="separator:aeefa5bf9839dd31ba78b33cfe092505c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124397944174948c82524f6632e21371"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#a124397944174948c82524f6632e21371">sendTorqueCommand</a> (const std::vector&lt; double &gt; &amp;torque)</td></tr>
<tr class="separator:a124397944174948c82524f6632e21371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae16ff33ed407aabe5694da11807d8142"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#ae16ff33ed407aabe5694da11807d8142">WMAFilter</a> (const std::vector&lt; double &gt; &amp;velocity, const std::vector&lt; double &gt; &amp;motorTemp, std::vector&lt; double &gt; &amp;velocityFlt, std::vector&lt; double &gt; &amp;motorTempFlt)</td></tr>
<tr class="separator:ae16ff33ed407aabe5694da11807d8142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26e78647cafc275e2c633f8e115c28c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#a26e78647cafc275e2c633f8e115c28c7">movingAverage</a> (const std::vector&lt; double &gt; &amp;data_vector, const int &amp;num, const int &amp;vec_sum, double &amp;WMA, double &amp;numerator, double &amp;total) const</td></tr>
<tr class="separator:a26e78647cafc275e2c633f8e115c28c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53acf57dd669cb3d2634b3d508a0d439"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarmcontroller.html#a53acf57dd669cb3d2634b3d508a0d439">subscriberCallback</a> (const model_learning::CommandML &amp;cmd)</td></tr>
<tr class="separator:a53acf57dd669cb3d2634b3d508a0d439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45794311f7ab89c67fe7423e07ea19d7"><td class="memItemLeft" align="right" valign="top"><a id="a45794311f7ab89c67fe7423e07ea19d7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>init</b> ()</td></tr>
<tr class="separator:a45794311f7ab89c67fe7423e07ea19d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cba85249ae1746aeac14d12b68becdc"><td class="memItemLeft" align="right" valign="top"><a id="a3cba85249ae1746aeac14d12b68becdc"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>updateFeedback</b> ()</td></tr>
<tr class="separator:a3cba85249ae1746aeac14d12b68becdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1970af350bf0902f57bdbf4089f3b13"><td class="memItemLeft" align="right" valign="top"><a id="af1970af350bf0902f57bdbf4089f3b13"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>getFeedbackMsg</b> (sensor_msgs::JointState &amp;, trajectory_msgs::JointTrajectoryPoint &amp;, model_learning::FeedbackML &amp;)</td></tr>
<tr class="separator:af1970af350bf0902f57bdbf4089f3b13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d9414eb9b6c92b3f19f177c44f9f6f1"><td class="memItemLeft" align="right" valign="top"><a id="a5d9414eb9b6c92b3f19f177c44f9f6f1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>controller</b> (const Eigen::VectorXd &amp;, const Eigen::VectorXd &amp;, const Eigen::VectorXd &amp;, std::vector&lt; double &gt; &amp;)</td></tr>
<tr class="separator:a5d9414eb9b6c92b3f19f177c44f9f6f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2385c8f95fd011e1206d2730615a4fad"><td class="memItemLeft" align="right" valign="top"><a id="a2385c8f95fd011e1206d2730615a4fad"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>feedbackControl</b> (const Eigen::VectorXd &amp;, const Eigen::VectorXd &amp;, std::vector&lt; double &gt; &amp;)</td></tr>
<tr class="separator:a2385c8f95fd011e1206d2730615a4fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146f6d320cd7641c9fbc8c7b014a7ceb"><td class="memItemLeft" align="right" valign="top"><a id="a146f6d320cd7641c9fbc8c7b014a7ceb"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>sendCommand</b> (const std::vector&lt; double &gt; &amp;, const std::vector&lt; double &gt; &amp;)</td></tr>
<tr class="separator:a146f6d320cd7641c9fbc8c7b014a7ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb671e988673c3750f3c846cac593eba"><td class="memItemLeft" align="right" valign="top"><a id="adb671e988673c3750f3c846cac593eba"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>sendTorqueCommand</b> (const std::vector&lt; double &gt; &amp;)</td></tr>
<tr class="separator:adb671e988673c3750f3c846cac593eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f48bad4ba4c88f294d1dd78df260fc7"><td class="memItemLeft" align="right" valign="top"><a id="a9f48bad4ba4c88f294d1dd78df260fc7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>subscriberCallback</b> (const model_learning::CommandML &amp;)</td></tr>
<tr class="separator:a9f48bad4ba4c88f294d1dd78df260fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac707c804ed04bcbf212c3c5456f4dffe"><td class="memItemLeft" align="right" valign="top"><a id="ac707c804ed04bcbf212c3c5456f4dffe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>WMAFilter</b> (const std::vector&lt; double &gt; &amp;, const std::vector&lt; double &gt; &amp;, std::vector&lt; double &gt; &amp;, std::vector&lt; double &gt; &amp;)</td></tr>
<tr class="separator:ac707c804ed04bcbf212c3c5456f4dffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbe2ad7337bc5ac6c31502def583ed3a"><td class="memItemLeft" align="right" valign="top"><a id="adbe2ad7337bc5ac6c31502def583ed3a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>movingAverage</b> (const std::vector&lt; double &gt; &amp;, const int &amp;, const int &amp;, double &amp;, double &amp;, double &amp;) const</td></tr>
<tr class="separator:adbe2ad7337bc5ac6c31502def583ed3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a874e5713e57b27d8bd2411a8489f7866"><td class="memItemLeft" align="right" valign="top"><a id="a874e5713e57b27d8bd2411a8489f7866"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_vel_que1</b></td></tr>
<tr class="separator:a874e5713e57b27d8bd2411a8489f7866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81cbec8fd65f32026d45d39261c0dda2"><td class="memItemLeft" align="right" valign="top"><a id="a81cbec8fd65f32026d45d39261c0dda2"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_vel_que2</b></td></tr>
<tr class="separator:a81cbec8fd65f32026d45d39261c0dda2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec26a722458e61e1d19bb2792727ba76"><td class="memItemLeft" align="right" valign="top"><a id="aec26a722458e61e1d19bb2792727ba76"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_vel_que3</b></td></tr>
<tr class="separator:aec26a722458e61e1d19bb2792727ba76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ea47e211011bd1b1e0d99d98073e58"><td class="memItemLeft" align="right" valign="top"><a id="af9ea47e211011bd1b1e0d99d98073e58"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_vel_que4</b></td></tr>
<tr class="separator:af9ea47e211011bd1b1e0d99d98073e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa15c4f2ae51f44ca935c3625211155e9"><td class="memItemLeft" align="right" valign="top"><a id="aa15c4f2ae51f44ca935c3625211155e9"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_vel_que5</b></td></tr>
<tr class="separator:aa15c4f2ae51f44ca935c3625211155e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfb8b7af9f3b36d81b3a94559c6a2e28"><td class="memItemLeft" align="right" valign="top"><a id="acfb8b7af9f3b36d81b3a94559c6a2e28"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_temp_que1</b></td></tr>
<tr class="separator:acfb8b7af9f3b36d81b3a94559c6a2e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ade00ba55165258195ea263150cdf4"><td class="memItemLeft" align="right" valign="top"><a id="af2ade00ba55165258195ea263150cdf4"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_temp_que2</b></td></tr>
<tr class="separator:af2ade00ba55165258195ea263150cdf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b0fa6095474fdfd30742967f04c5825"><td class="memItemLeft" align="right" valign="top"><a id="a0b0fa6095474fdfd30742967f04c5825"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_temp_que3</b></td></tr>
<tr class="separator:a0b0fa6095474fdfd30742967f04c5825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad87315185a3143531b44fc88ea36bb7"><td class="memItemLeft" align="right" valign="top"><a id="aad87315185a3143531b44fc88ea36bb7"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_temp_que4</b></td></tr>
<tr class="separator:aad87315185a3143531b44fc88ea36bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02fb1470c7f547094592fa8589d96f82"><td class="memItemLeft" align="right" valign="top"><a id="a02fb1470c7f547094592fa8589d96f82"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>single_temp_que5</b></td></tr>
<tr class="separator:a02fb1470c7f547094592fa8589d96f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c171b07686d075da4c32b27e0920bd"><td class="memItemLeft" align="right" valign="top"><a id="a98c171b07686d075da4c32b27e0920bd"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>last_alpha4</b></td></tr>
<tr class="separator:a98c171b07686d075da4c32b27e0920bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Arm Controller Node for the HEBI Robotics 5-DOF Manipulator Arm. </p>
<p>Run the arm controller node that receives feedback from and sends commands to the HEBI modules </p><pre class="fragment">@Author Ky Woodard</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7e2b5cd80851fced3e54641422fb04dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e2b5cd80851fced3e54641422fb04dd">&#9670;&nbsp;</a></span>armcontroller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">armcontroller::armcontroller </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor for the arm controller, which initializes values used </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab2a040d42baac477ccc328d03b8c8903"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2a040d42baac477ccc328d03b8c8903">&#9670;&nbsp;</a></span>controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void armcontroller::controller </td>
          <td>(</td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>positionCmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>velocityCmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>accelCmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>torque</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generates the torque command based off the feedback and feedforward control components </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">positionCmd</td><td>desired joint position commands [rad] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">velocityCmd</td><td>desired joint velocity commands [rad/s] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">accelCmd</td><td>desired joint acceleration commands [rad/s^s] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">torque</td><td>module input torques [N-m] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa96c09e059c416f996774d4bf4b80619"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa96c09e059c416f996774d4bf4b80619">&#9670;&nbsp;</a></span>feedbackControl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void armcontroller::feedbackControl </td>
          <td>(</td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>error_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>error_vel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>torque</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Linear feedback controller on position and velocity </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">error_pos</td><td>joint position errors [rad] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">error_vel</td><td>joint velocity errors [rad/s] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">torque</td><td>joint control torques [N-m] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af8bbda9cbee82997b7429ecda7c5412b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8bbda9cbee82997b7429ecda7c5412b">&#9670;&nbsp;</a></span>getFeedbackMsg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void armcontroller::getFeedbackMsg </td>
          <td>(</td>
          <td class="paramtype">sensor_msgs::JointState &amp;&#160;</td>
          <td class="paramname"><em>jointState_fbk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trajectory_msgs::JointTrajectoryPoint &amp;&#160;</td>
          <td class="paramname"><em>trajectoryCmd_fbk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">model_learning::FeedbackML &amp;&#160;</td>
          <td class="paramname"><em>armcontroller_fbk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Getter function for the feedback to pull the most recent feedback call </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">jointState_fbk</td><td>ROS standard JointState message </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">trajectoryCmd_fbk</td><td>ROS standard JointTrajectory message </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">armcontroller_fbk</td><td>Custom message encapsilating jointState JointTrajectory and all custom inputs </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>flag signifying if the Feedback was update successfully </dd></dl>

</div>
</div>
<a id="a45794311f7ab89c67fe7423e07ea19d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45794311f7ab89c67fe7423e07ea19d7">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void armcontroller::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialization function sets up the communication with the modules </p>

</div>
</div>
<a id="a26e78647cafc275e2c633f8e115c28c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26e78647cafc275e2c633f8e115c28c7">&#9670;&nbsp;</a></span>movingAverage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void armcontroller::movingAverage </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>data_vector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>vec_sum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>WMA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>numerator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>total</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Weighted moving average filter </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data_vector</td><td>unfiltered signal </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num</td><td>number of past points to filter </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vec_sum</td><td>sum of all the weighting values </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">WMA</td><td>weighted moving average (incrementally updated) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">numerator</td><td>sum of all the ponit multiplied by their respective weights (incrementally updated) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">total</td><td>sum of all the points (incrementatlly updated) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeefa5bf9839dd31ba78b33cfe092505c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeefa5bf9839dd31ba78b33cfe092505c">&#9670;&nbsp;</a></span>sendCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool armcontroller::sendCommand </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>torque</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends position and torque commands to the modules </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">alpha</td><td>joint position signal [rad] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">torque</td><td>joint torque signal [N-m] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>flag signifying if the command was sent (does not verify the module got it) </dd></dl>

</div>
</div>
<a id="a124397944174948c82524f6632e21371"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124397944174948c82524f6632e21371">&#9670;&nbsp;</a></span>sendTorqueCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool armcontroller::sendTorqueCommand </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>torque</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends torque commands to the modules </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">torque</td><td>joint torque signal [N-m] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>flag signifying if the command was sent (does not verify the module got it) </dd></dl>

</div>
</div>
<a id="a53acf57dd669cb3d2634b3d508a0d439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53acf57dd669cb3d2634b3d508a0d439">&#9670;&nbsp;</a></span>subscriberCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void armcontroller::subscriberCallback </td>
          <td>(</td>
          <td class="paramtype">const model_learning::CommandML &amp;&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback function for getting the commands from the CommandML ros topic and performing the control actions </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>custom command message from ROS topic callback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3cba85249ae1746aeac14d12b68becdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cba85249ae1746aeac14d12b68becdc">&#9670;&nbsp;</a></span>updateFeedback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool armcontroller::updateFeedback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Asks for feedback from the modules and if received, updates the current controller feedback state. It additionally calls the filtering and dynamics computation functions. </p>

</div>
</div>
<a id="ae16ff33ed407aabe5694da11807d8142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae16ff33ed407aabe5694da11807d8142">&#9670;&nbsp;</a></span>WMAFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void armcontroller::WMAFilter </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>velocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>motorTemp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>velocityFlt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>motorTempFlt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Weighted moving average filter for velocity and temperature </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">velocity</td><td>unfiltered velocity signal [rad/s] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">motorTemp</td><td>unfiltered motor temperature [C] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">velocityFlt</td><td>filtered velocity signal [rad/s] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">motorTempFlt</td><td>filtered motor temperature [C] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>arm_controller.cpp</li>
<li>arm_openloop.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
